!DOCTYPE html>
<html>
<head>
<title>joker creator by map</title>
<meta charset="utf-8">
<meta title="joker">
</head>
<style>
    body {
        border:1px black solid;
        background-color: aquamarine;
    }
</style>
<body>
<p>joker creator</p>
<div>
    <label for="username">input sb's name pleae:</label><input type="text" id="username" placeholder="Bob">
</div>
<div>
    <label for="chinese">common</label><input id="chinese" type="radio" name="measure" class="chinese">
    <label for="amrican">amrican</label><input id="amrican" type="radio" name="measure" class="amrican">
</div>
<div>
    <button class="jokeCreator">creat joke</button>
</div>
<p class="story"></p>
<script>

const username=document.getElementById('username');
const jokeCreator=document.querySelector('.jokeCreator');
const story=document.querySelector('.story');

const storyText='今天气温 34 摄氏度，:inserta:出去遛弯。当走到:insertb:门前时，突然就:insertc:。人们都惊呆了，李雷全程目睹但并没有慌，因为:inserta:是一个 130 公斤的胖子，天气又辣么热。';
const textA=['怪兽威利','大老爹','圣诞老人'];
const textB=['肯德基','迪士尼乐园','白宫'];
const textC=['自燃了','在人行道化成了一坨泥','变成一条鼻涕虫爬走了'];

function randomValueFrom(array){
    const random=Math.floor(Math.random()*array.length);
    return array[random];
}

jokeCreator.addEventListener('click',result);
function result(){
    let newStory=storyText;
    let itemA=randomValueFrom(textA);
    let itemB=randomValueFrom(textB);
    let itemC=randomValueFrom(textC);
    newStory=newStory.replace(':inserta:',itemA);
    newStory=newStory.replace(':inserta:',itemA);
    newStory=newStory.replace(':insertb:',itemB);
    newStory=newStory.replace(':insertc:',itemC);

    if(username!==''){
        let name=username.value;
        newStory=newStory.replace('李雷',name);
    }
    if(document.getElementById('amrican').checked){
        const temp=Math.round(35 * 9 / 5 + 32) + ' 华氏度';
        const wei=Math.round(140 * 2.20462) + ' 磅';
        newStory=newStory.replace('34 摄氏度',temp);
        newStory=newStory.replace('130 公斤',wei);
    }
    story.textContent=newStory;
    story.style.visibility = 'visible';
}
</script>
</body>
</html>

